(function(r){var e;function s(){var b=function(){f.text("Connected.").fadeOut(1E3,function(){g.fadeIn(100,function(){h.show();$("#player-name").on("keypress",function(b){if(13==(b.keyCode?b.keyCode:b.which)){b=$("#game-name").val();var a=$("#player-name").val();""==b||""==a?g.find("input").shake():($("#player-name").blur(),g.hide(),d("Connecting..."),c.emit("login",{game:$.trim(b).toLowerCase(),player:$.trim(a)}))}});$("#game-name").focus()})})};$("#progress").width("101%").delay(500).fadeOut(400,
function(){$(this).remove();b&&b()})}function t(){d("Game Already Started.<span>Why not start your own?</span>");f.fadeOut(5E3,function(){g.fadeIn()})}function u(b){e=b.game;d("Game On!<span>Waiting for players to join...</span>");a._loaded&&a.play("join")}function v(b){e=b.game;d("Welcome!<span>You are player #"+b.count+".<br/>Please wait for game to start...</span>");a._loaded&&a.play("join")}function w(b){d(b.message);a._loaded&&a.play("join")}function x(){n.show();$("#start-button").attr("href",
"javascript:hp.onStartClick()")}function y(){n.show();var b=$("#start-button");b.html("On Your Marks...");var c=5,d=setInterval(function(){c-=1;a._loaded&&a.play("tick");4==c?b.html("Get Set..."):0==c?(b.html("GO!"),clearInterval(d),j("left"),a._loaded&&a.play("background"),setTimeout(function(){n.hide()},1E3)):b.html(c)},1E3)}function z(b){d(b);a._loaded&&a.play("tick")}function A(b){a._loaded&&(a.stop(),a.play("tick"));h.hide();d(b);p=setTimeout(function(){a._loaded&&a.play("background")},2E3)}
function B(){e=null;d("Game Closed!");a._loaded&&a.stop();h.hide();f.fadeOut(2E3,function(){j("home",function(){g.fadeIn()})})}function C(b){d(b.message)}function D(){k=!0;j("home");d("Quick! You're It!<span>Swipe left or right.</span>");l=setTimeout(function(){j("right",function(){k=!1;c.emit("pass",e)})},5E3)}function E(){clearTimeout(l);e=null;k=!1;a._loaded&&a.stop();h.hide();d("You're Out!");f.fadeOut(5E3,function(){j("home",function(){g.fadeIn()})})}function F(b){b.gesture.preventDefault();
if(k){var a=!1;switch(b.type){case "swipeleft":a="left";break;case "swiperight":a="right"}a&&(b.gesture.stopDetect(),j(a,function(){k=!1;c.emit("pass",e)}),l&&clearTimeout(l))}}function j(b,a){var c="-5%",d=0.1;switch(b){case "right":c="105%";break;case "home":c="50%",d=1}h.show();TweenMax.to(h,1,{css:{left:c,scale:d},onComplete:function(){a&&a()}})}function G(){clearTimeout(l);clearTimeout(p);e=null;k=!1;a._loaded&&a.stop();h.hide();d("Congratulations!<span>Your are the Winner!</span>");f.shake();
f.fadeOut(1E4,function(){j("home",function(){g.fadeIn()})})}function H(a){d(a)}function d(a){f.show().html(a)}var c;e=null;var a,q=!1,m,h,f,g,n,l=null,p=null,k=!1,I=r.hp={init:function(){a=new Howl({urls:["../sound/sounds.mp3"],sprite:{join:[0,1290],silence:[1290,774],background:[2064,23E3],tick:[25151,200]}});$(document).hammer().on("touch",function(){a._loaded&&!q&&(a.play("silence"),q=!0)});m=$("#home");h=m.find(".potato");g=m.find(".login");f=m.find(".status").find("h2");n=m.find(".start");0===
$("#progress").length&&($("body").append($("<div><dt/><dd/></div>").attr("id","progress")),$("#progress").width(50+30*Math.random()+"%"));$(document).hammer({drag_lock_to_axis:!0}).on("release dragleft dragright swipeleft swiperight",F);c=io.connect("#{site.url}");c.on("connect",s);c.on("inProgress",t);c.on("starting",y);c.on("started",u);c.on("joined",v);c.on("playerJoined",w);c.on("enabled",x);c.on("resignation",C);c.on("closed",B);c.on("update",H);c.on("atPlayer",z);c.on("playerIsOut",A);c.on("youAreIt",
D);c.on("youAreOut",E);c.on("winner",G)},onStartClick:function(){$("#start-button").attr("href","javascript:;");c.emit("starting",e);setTimeout(function(){c.emit("start",e)},6E3)}};$(function(){I.init()})})(this);
